{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\user\\\\Desktop\\\\commentsAngular\\\\comments\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { DataService } from './data.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./data.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./one-comment/one-comment.component\";\n\nfunction AppComponent_div_0_ng_container_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-one-comment\", 5);\n    i0.ɵɵlistener(\"incrementValue\", function AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_incrementValue_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext(3);\n      return ctx_r5.incrementScore($event);\n    })(\"decrementValue\", function AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_decrementValue_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r7 = i0.ɵɵnextContext(3);\n      return ctx_r7.decrementScore($event);\n    })(\"deleteValue\", function AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_deleteValue_1_listener($event) {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r8 = i0.ɵɵnextContext(3);\n      return ctx_r8.deleteComment($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const repliesComment_r4 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"commentInfo\", repliesComment_r4);\n  }\n}\n\nfunction AppComponent_div_0_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AppComponent_div_0_ng_container_2_div_1_Template, 2, 1, \"div\", 4);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const comment_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", comment_r1.replies);\n  }\n}\n\nfunction AppComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"app-one-comment\", 2);\n    i0.ɵɵlistener(\"incrementValue\", function AppComponent_div_0_Template_app_one_comment_incrementValue_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return ctx_r10.incrementScore($event);\n    })(\"decrementValue\", function AppComponent_div_0_Template_app_one_comment_decrementValue_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return ctx_r12.decrementScore($event);\n    })(\"deleteValue\", function AppComponent_div_0_Template_app_one_comment_deleteValue_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return ctx_r13.deleteComment($event);\n    })(\"replyText\", function AppComponent_div_0_Template_app_one_comment_replyText_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.replyComment($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, AppComponent_div_0_ng_container_2_Template, 2, 1, \"ng-container\", 3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const comment_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"commentInfo\", comment_r1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", comment_r1.replies);\n  }\n}\n\nexport class AppComponent {\n  // myDate = new Date();\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.allInfo = {};\n    this.allComments = [];\n  }\n\n  load() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      _this.allInfo = yield _this.dataService.getUsers();\n      _this.allComments = _this.allInfo.comments;\n    })();\n  }\n\n  ngOnInit() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this2.load();\n    })();\n  }\n\n  replyComment(obj) {\n    const date = new Date();\n    const comment = {\n      id: Date.now(),\n      content: obj.content,\n      creadetAt: `${date.getDay()}/${date.getMonth() + 1}/${date.getFullYear()}`,\n      score: 0,\n      user: {\n        image: this.allInfo.currentUser.image,\n        username: this.allInfo.currentUser.username\n      }\n    };\n\n    for (let i = 0; i < this.allComments.length; i++) {\n      if (this.allComments[i].id === id && this.allComments[i].score >= 0) {\n        this.allComments[i].score++;\n      } // this.allComments.push(obj.content);\n\n    } //increment function\n\n\n    incrementScore(id, number);\n    {\n      for (let i = 0; i < this.allComments.length; i++) {\n        if (this.allComments[i].id === id && this.allComments[i].score >= 0) {\n          this.allComments[i].score++;\n        }\n\n        if (this.allComments[i].replies) {\n          for (let j = 0; j < this.allComments[i].replies.length; j++) {\n            if (this.allComments[i].replies[j].id === id && this.allComments[i].replies[j].score >= 0) {\n              this.allComments[i].replies[j].score++;\n            }\n          }\n        }\n      }\n    } //decrement function\n\n    decrementScore(id, number);\n    {\n      for (let i = 0; i < this.allComments.length; i++) {\n        if (this.allComments[i].id === id && this.allComments[i].score > 0) {\n          this.allComments[i].score--;\n        }\n\n        if (this.allComments[i].replies) {\n          for (let j = 0; j < this.allComments[i].replies.length; j++) {\n            if (this.allComments[i].replies[j].id === id && this.allComments[i].replies[j].score > 0) {\n              this.allComments[i].replies[j].score--;\n            }\n          }\n        }\n      }\n    }\n    deleteComment(id, number);\n    {\n      this.allComments = this.allComments.filter(comments => {\n        if (comments.replies) {\n          comments.replies = comments.replies.filter(replyComment => {\n            return replyComment.id !== id;\n          });\n        }\n\n        return comments.id !== id;\n      });\n    }\n  }\n\n}\n\nAppComponent.ɵfac = function AppComponent_Factory(t) {\n  return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n};\n\nAppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: AppComponent,\n  selectors: [[\"app-root\"]],\n  features: [i0.ɵɵProvidersFeature([DataService])],\n  decls: 1,\n  vars: 1,\n  consts: [[\"id\", \"container\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"container\"], [3, \"commentInfo\", \"incrementValue\", \"decrementValue\", \"deleteValue\", \"replyText\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"commentInfo\", \"incrementValue\", \"decrementValue\", \"deleteValue\"]],\n  template: function AppComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AppComponent_div_0_Template, 3, 2, \"div\", 0);\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngForOf\", ctx.allComments);\n    }\n  },\n  directives: [i2.NgForOf, i3.OneCommentComponent, i2.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/user/Desktop/commentsAngular/comments/src/app/app.component.ts"],"names":["DataService","i0","i1","i2","i3","AppComponent_div_0_ng_container_2_div_1_Template","rf","ctx","_r6","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_incrementValue_1_listener","$event","ɵɵrestoreView","ctx_r5","ɵɵnextContext","incrementScore","AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_decrementValue_1_listener","ctx_r7","decrementScore","AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_deleteValue_1_listener","ctx_r8","deleteComment","ɵɵelementEnd","repliesComment_r4","$implicit","ɵɵadvance","ɵɵproperty","AppComponent_div_0_ng_container_2_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","comment_r1","replies","AppComponent_div_0_Template","_r11","AppComponent_div_0_Template_app_one_comment_incrementValue_1_listener","ctx_r10","AppComponent_div_0_Template_app_one_comment_decrementValue_1_listener","ctx_r12","AppComponent_div_0_Template_app_one_comment_deleteValue_1_listener","ctx_r13","AppComponent_div_0_Template_app_one_comment_replyText_1_listener","ctx_r14","replyComment","AppComponent","constructor","dataService","allInfo","allComments","load","getUsers","comments","ngOnInit","obj","date","Date","comment","id","now","content","creadetAt","getDay","getMonth","getFullYear","score","user","image","currentUser","username","i","length","number","j","filter","ɵfac","AppComponent_Factory","t","ɵɵdirectiveInject","ɵcmp","ɵɵdefineComponent","type","selectors","features","ɵɵProvidersFeature","decls","vars","consts","template","AppComponent_Template","directives","NgForOf","OneCommentComponent","NgIf","styles"],"mappings":";AAAA,SAASA,WAAT,QAA4B,gBAA5B;AACA,OAAO,KAAKC,EAAZ,MAAoB,eAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,gBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,iBAApB;AACA,OAAO,KAAKC,EAAZ,MAAoB,qCAApB;;AACA,SAASC,gDAAT,CAA0DC,EAA1D,EAA8DC,GAA9D,EAAmE;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AAC7E,UAAME,GAAG,GAAGP,EAAE,CAACQ,gBAAH,EAAZ;;AACAR,IAAAA,EAAE,CAACS,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,iBAA/B,EAAkD,CAAlD;AACAT,IAAAA,EAAE,CAACU,UAAH,CAAc,gBAAd,EAAgC,SAASC,0FAAT,CAAoGC,MAApG,EAA4G;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBN,GAAjB;AAAuB,YAAMO,MAAM,GAAGd,EAAE,CAACe,aAAH,CAAiB,CAAjB,CAAf;AAAoC,aAAOD,MAAM,CAACE,cAAP,CAAsBJ,MAAtB,CAAP;AAAuC,KAAhP,EAAkP,gBAAlP,EAAoQ,SAASK,0FAAT,CAAoGL,MAApG,EAA4G;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBN,GAAjB;AAAuB,YAAMW,MAAM,GAAGlB,EAAE,CAACe,aAAH,CAAiB,CAAjB,CAAf;AAAoC,aAAOG,MAAM,CAACC,cAAP,CAAsBP,MAAtB,CAAP;AAAuC,KAApd,EAAsd,aAAtd,EAAqe,SAASQ,uFAAT,CAAiGR,MAAjG,EAAyG;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBN,GAAjB;AAAuB,YAAMc,MAAM,GAAGrB,EAAE,CAACe,aAAH,CAAiB,CAAjB,CAAf;AAAoC,aAAOM,MAAM,CAACC,aAAP,CAAqBV,MAArB,CAAP;AAAsC,KAAjrB;AACAZ,IAAAA,EAAE,CAACuB,YAAH;AACH;;AAAC,MAAIlB,EAAE,GAAG,CAAT,EAAY;AACV,UAAMmB,iBAAiB,GAAGlB,GAAG,CAACmB,SAA9B;AACAzB,IAAAA,EAAE,CAAC0B,SAAH,CAAa,CAAb;AACA1B,IAAAA,EAAE,CAAC2B,UAAH,CAAc,aAAd,EAA6BH,iBAA7B;AACH;AAAE;;AACH,SAASI,0CAAT,CAAoDvB,EAApD,EAAwDC,GAAxD,EAA6D;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACvEL,IAAAA,EAAE,CAAC6B,uBAAH,CAA2B,CAA3B;AACA7B,IAAAA,EAAE,CAAC8B,UAAH,CAAc,CAAd,EAAiB1B,gDAAjB,EAAmE,CAAnE,EAAsE,CAAtE,EAAyE,KAAzE,EAAgF,CAAhF;AACAJ,IAAAA,EAAE,CAAC+B,qBAAH;AACH;;AAAC,MAAI1B,EAAE,GAAG,CAAT,EAAY;AACV,UAAM2B,UAAU,GAAGhC,EAAE,CAACe,aAAH,GAAmBU,SAAtC;AACAzB,IAAAA,EAAE,CAAC0B,SAAH,CAAa,CAAb;AACA1B,IAAAA,EAAE,CAAC2B,UAAH,CAAc,SAAd,EAAyBK,UAAU,CAACC,OAApC;AACH;AAAE;;AACH,SAASC,2BAAT,CAAqC7B,EAArC,EAAyCC,GAAzC,EAA8C;AAAE,MAAID,EAAE,GAAG,CAAT,EAAY;AACxD,UAAM8B,IAAI,GAAGnC,EAAE,CAACQ,gBAAH,EAAb;;AACAR,IAAAA,EAAE,CAACS,cAAH,CAAkB,CAAlB,EAAqB,KAArB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,iBAAlC,EAAqD,CAArD;AACAT,IAAAA,EAAE,CAACU,UAAH,CAAc,gBAAd,EAAgC,SAAS0B,qEAAT,CAA+ExB,MAA/E,EAAuF;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBsB,IAAjB;AAAwB,YAAME,OAAO,GAAGrC,EAAE,CAACe,aAAH,EAAhB;AAAoC,aAAOsB,OAAO,CAACrB,cAAR,CAAuBJ,MAAvB,CAAP;AAAwC,KAA7N,EAA+N,gBAA/N,EAAiP,SAAS0B,qEAAT,CAA+E1B,MAA/E,EAAuF;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBsB,IAAjB;AAAwB,YAAMI,OAAO,GAAGvC,EAAE,CAACe,aAAH,EAAhB;AAAoC,aAAOwB,OAAO,CAACpB,cAAR,CAAuBP,MAAvB,CAAP;AAAwC,KAA9a,EAAgb,aAAhb,EAA+b,SAAS4B,kEAAT,CAA4E5B,MAA5E,EAAoF;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBsB,IAAjB;AAAwB,YAAMM,OAAO,GAAGzC,EAAE,CAACe,aAAH,EAAhB;AAAoC,aAAO0B,OAAO,CAACnB,aAAR,CAAsBV,MAAtB,CAAP;AAAuC,KAAxnB,EAA0nB,WAA1nB,EAAuoB,SAAS8B,gEAAT,CAA0E9B,MAA1E,EAAkF;AAAEZ,MAAAA,EAAE,CAACa,aAAH,CAAiBsB,IAAjB;AAAwB,YAAMQ,OAAO,GAAG3C,EAAE,CAACe,aAAH,EAAhB;AAAoC,aAAO4B,OAAO,CAACC,YAAR,CAAqBhC,MAArB,CAAP;AAAsC,KAA7zB;AACAZ,IAAAA,EAAE,CAACuB,YAAH;AACAvB,IAAAA,EAAE,CAAC8B,UAAH,CAAc,CAAd,EAAiBF,0CAAjB,EAA6D,CAA7D,EAAgE,CAAhE,EAAmE,cAAnE,EAAmF,CAAnF;AACA5B,IAAAA,EAAE,CAACuB,YAAH;AACH;;AAAC,MAAIlB,EAAE,GAAG,CAAT,EAAY;AACV,UAAM2B,UAAU,GAAG1B,GAAG,CAACmB,SAAvB;AACAzB,IAAAA,EAAE,CAAC0B,SAAH,CAAa,CAAb;AACA1B,IAAAA,EAAE,CAAC2B,UAAH,CAAc,aAAd,EAA6BK,UAA7B;AACAhC,IAAAA,EAAE,CAAC0B,SAAH,CAAa,CAAb;AACA1B,IAAAA,EAAE,CAAC2B,UAAH,CAAc,MAAd,EAAsBK,UAAU,CAACC,OAAjC;AACH;AAAE;;AACH,OAAO,MAAMY,YAAN,CAAmB;AACtB;AACAC,EAAAA,WAAW,CAACC,WAAD,EAAc;AACrB,SAAKA,WAAL,GAAmBA,WAAnB;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACH;;AACKC,EAAAA,IAAI,GAAG;AAAA;;AAAA;AACT,MAAA,KAAI,CAACF,OAAL,SAAqB,KAAI,CAACD,WAAL,CAAiBI,QAAjB,EAArB;AACA,MAAA,KAAI,CAACF,WAAL,GAAmB,KAAI,CAACD,OAAL,CAAaI,QAAhC;AAFS;AAGZ;;AAEKC,EAAAA,QAAQ,GAAG;AAAA;;AAAA;AACb,YAAM,MAAI,CAACH,IAAL,EAAN;AADa;AAEhB;;AACDN,EAAAA,YAAY,CAACU,GAAD,EAAM;AACd,UAAMC,IAAI,GAAG,IAAIC,IAAJ,EAAb;AACA,UAAMC,OAAO,GAAG;AACZC,MAAAA,EAAE,EAAEF,IAAI,CAACG,GAAL,EADQ;AAEZC,MAAAA,OAAO,EAAEN,GAAG,CAACM,OAFD;AAGZC,MAAAA,SAAS,EAAG,GAAEN,IAAI,CAACO,MAAL,EAAc,IAAGP,IAAI,CAACQ,QAAL,KAAkB,CAAE,IAAGR,IAAI,CAACS,WAAL,EAAmB,EAH7D;AAIZC,MAAAA,KAAK,EAAE,CAJK;AAKZC,MAAAA,IAAI,EAAE;AACFC,QAAAA,KAAK,EAAE,KAAKnB,OAAL,CAAaoB,WAAb,CAAyBD,KAD9B;AAEFE,QAAAA,QAAQ,EAAE,KAAKrB,OAAL,CAAaoB,WAAb,CAAyBC;AAFjC;AALM,KAAhB;;AAUA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,WAAL,CAAiBsB,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAC9C,UAAI,KAAKrB,WAAL,CAAiBqB,CAAjB,EAAoBZ,EAApB,KAA2BA,EAA3B,IAAiC,KAAKT,WAAL,CAAiBqB,CAAjB,EAAoBL,KAApB,IAA6B,CAAlE,EAAqE;AACjE,aAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBL,KAApB;AACH,OAH6C,CAI9C;;AACH,KAjBa,CAkBd;;;AACAjD,IAAAA,cAAc,CAAC0C,EAAD,EAAKc,MAAL,CAAd;AACA;AACI,WAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,WAAL,CAAiBsB,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAC9C,YAAI,KAAKrB,WAAL,CAAiBqB,CAAjB,EAAoBZ,EAApB,KAA2BA,EAA3B,IAAiC,KAAKT,WAAL,CAAiBqB,CAAjB,EAAoBL,KAApB,IAA6B,CAAlE,EAAqE;AACjE,eAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBL,KAApB;AACH;;AACD,YAAI,KAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAAxB,EAAiC;AAC7B,eAAK,IAAIwC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BsC,MAAhD,EAAwDE,CAAC,EAAzD,EAA6D;AACzD,gBAAI,KAAKxB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BwC,CAA5B,EAA+Bf,EAA/B,KAAsCA,EAAtC,IAA4C,KAAKT,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BwC,CAA5B,EAA+BR,KAA/B,IAAwC,CAAxF,EAA2F;AACvF,mBAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BwC,CAA5B,EAA+BR,KAA/B;AACH;AACJ;AACJ;AACJ;AACJ,KAjCa,CAkCd;;AACA9C,IAAAA,cAAc,CAACuC,EAAD,EAAKc,MAAL,CAAd;AACA;AACI,WAAK,IAAIF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKrB,WAAL,CAAiBsB,MAArC,EAA6CD,CAAC,EAA9C,EAAkD;AAC9C,YAAI,KAAKrB,WAAL,CAAiBqB,CAAjB,EAAoBZ,EAApB,KAA2BA,EAA3B,IAAiC,KAAKT,WAAL,CAAiBqB,CAAjB,EAAoBL,KAApB,GAA4B,CAAjE,EAAoE;AAChE,eAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBL,KAApB;AACH;;AACD,YAAI,KAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAAxB,EAAiC;AAC7B,eAAK,IAAIwC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKxB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BsC,MAAhD,EAAwDE,CAAC,EAAzD,EAA6D;AACzD,gBAAI,KAAKxB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BwC,CAA5B,EAA+Bf,EAA/B,KAAsCA,EAAtC,IAA4C,KAAKT,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BwC,CAA5B,EAA+BR,KAA/B,GAAuC,CAAvF,EAA0F;AACtF,mBAAKhB,WAAL,CAAiBqB,CAAjB,EAAoBrC,OAApB,CAA4BwC,CAA5B,EAA+BR,KAA/B;AACH;AACJ;AACJ;AACJ;AACJ;AACD3C,IAAAA,aAAa,CAACoC,EAAD,EAAKc,MAAL,CAAb;AACA;AACI,WAAKvB,WAAL,GAAmB,KAAKA,WAAL,CAAiByB,MAAjB,CAAyBtB,QAAD,IAAc;AACrD,YAAIA,QAAQ,CAACnB,OAAb,EAAsB;AAClBmB,UAAAA,QAAQ,CAACnB,OAAT,GAAmBmB,QAAQ,CAACnB,OAAT,CAAiByC,MAAjB,CAAyB9B,YAAD,IAAkB;AACzD,mBAAOA,YAAY,CAACc,EAAb,KAAoBA,EAA3B;AACH,WAFkB,CAAnB;AAGH;;AACD,eAAON,QAAQ,CAACM,EAAT,KAAgBA,EAAvB;AACH,OAPkB,CAAnB;AAQH;AACJ;;AA5EqB;;AA8E1Bb,YAAY,CAAC8B,IAAb,GAAoB,SAASC,oBAAT,CAA8BC,CAA9B,EAAiC;AAAE,SAAO,KAAKA,CAAC,IAAIhC,YAAV,EAAwB7C,EAAE,CAAC8E,iBAAH,CAAqB7E,EAAE,CAACF,WAAxB,CAAxB,CAAP;AAAuE,CAA9H;;AACA8C,YAAY,CAACkC,IAAb,GAAoB,aAAc/E,EAAE,CAACgF,iBAAH,CAAqB;AAAEC,EAAAA,IAAI,EAAEpC,YAAR;AAAsBqC,EAAAA,SAAS,EAAE,CAAC,CAAC,UAAD,CAAD,CAAjC;AAAiDC,EAAAA,QAAQ,EAAE,CAACnF,EAAE,CAACoF,kBAAH,CAAsB,CAACrF,WAAD,CAAtB,CAAD,CAA3D;AAAmGsF,EAAAA,KAAK,EAAE,CAA1G;AAA6GC,EAAAA,IAAI,EAAE,CAAnH;AAAsHC,EAAAA,MAAM,EAAE,CAAC,CAAC,IAAD,EAAO,WAAP,EAAoB,CAApB,EAAuB,OAAvB,EAAgC,SAAhC,CAAD,EAA6C,CAAC,IAAD,EAAO,WAAP,CAA7C,EAAkE,CAAC,CAAD,EAAI,aAAJ,EAAmB,gBAAnB,EAAqC,gBAArC,EAAuD,aAAvD,EAAsE,WAAtE,CAAlE,EAAsJ,CAAC,CAAD,EAAI,MAAJ,CAAtJ,EAAmK,CAAC,CAAD,EAAI,OAAJ,EAAa,SAAb,CAAnK,EAA4L,CAAC,CAAD,EAAI,aAAJ,EAAmB,gBAAnB,EAAqC,gBAArC,EAAuD,aAAvD,CAA5L,CAA9H;AAAkYC,EAAAA,QAAQ,EAAE,SAASC,qBAAT,CAA+BpF,EAA/B,EAAmCC,GAAnC,EAAwC;AAAE,QAAID,EAAE,GAAG,CAAT,EAAY;AACjfL,MAAAA,EAAE,CAAC8B,UAAH,CAAc,CAAd,EAAiBI,2BAAjB,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,KAApD,EAA2D,CAA3D;AACH;;AAAC,QAAI7B,EAAE,GAAG,CAAT,EAAY;AACVL,MAAAA,EAAE,CAAC2B,UAAH,CAAc,SAAd,EAAyBrB,GAAG,CAAC2C,WAA7B;AACH;AAAE,GAJgD;AAI9CyC,EAAAA,UAAU,EAAE,CAACxF,EAAE,CAACyF,OAAJ,EAAaxF,EAAE,CAACyF,mBAAhB,EAAqC1F,EAAE,CAAC2F,IAAxC,CAJkC;AAIaC,EAAAA,MAAM,EAAE,CAAC,qKAAD;AAJrB,CAArB,CAAlC","sourcesContent":["import { DataService } from './data.service';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"./data.service\";\r\nimport * as i2 from \"@angular/common\";\r\nimport * as i3 from \"./one-comment/one-comment.component\";\r\nfunction AppComponent_div_0_ng_container_2_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    const _r6 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\")(1, \"app-one-comment\", 5);\r\n    i0.ɵɵlistener(\"incrementValue\", function AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_incrementValue_1_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r5 = i0.ɵɵnextContext(3); return ctx_r5.incrementScore($event); })(\"decrementValue\", function AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_decrementValue_1_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r7 = i0.ɵɵnextContext(3); return ctx_r7.decrementScore($event); })(\"deleteValue\", function AppComponent_div_0_ng_container_2_div_1_Template_app_one_comment_deleteValue_1_listener($event) { i0.ɵɵrestoreView(_r6); const ctx_r8 = i0.ɵɵnextContext(3); return ctx_r8.deleteComment($event); });\r\n    i0.ɵɵelementEnd()();\r\n} if (rf & 2) {\r\n    const repliesComment_r4 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"commentInfo\", repliesComment_r4);\r\n} }\r\nfunction AppComponent_div_0_ng_container_2_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵtemplate(1, AppComponent_div_0_ng_container_2_div_1_Template, 2, 1, \"div\", 4);\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const comment_r1 = i0.ɵɵnextContext().$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngForOf\", comment_r1.replies);\r\n} }\r\nfunction AppComponent_div_0_Template(rf, ctx) { if (rf & 1) {\r\n    const _r11 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"app-one-comment\", 2);\r\n    i0.ɵɵlistener(\"incrementValue\", function AppComponent_div_0_Template_app_one_comment_incrementValue_1_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r10 = i0.ɵɵnextContext(); return ctx_r10.incrementScore($event); })(\"decrementValue\", function AppComponent_div_0_Template_app_one_comment_decrementValue_1_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r12 = i0.ɵɵnextContext(); return ctx_r12.decrementScore($event); })(\"deleteValue\", function AppComponent_div_0_Template_app_one_comment_deleteValue_1_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r13 = i0.ɵɵnextContext(); return ctx_r13.deleteComment($event); })(\"replyText\", function AppComponent_div_0_Template_app_one_comment_replyText_1_listener($event) { i0.ɵɵrestoreView(_r11); const ctx_r14 = i0.ɵɵnextContext(); return ctx_r14.replyComment($event); });\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(2, AppComponent_div_0_ng_container_2_Template, 2, 1, \"ng-container\", 3);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const comment_r1 = ctx.$implicit;\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"commentInfo\", comment_r1);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", comment_r1.replies);\r\n} }\r\nexport class AppComponent {\r\n    // myDate = new Date();\r\n    constructor(dataService) {\r\n        this.dataService = dataService;\r\n        this.allInfo = {};\r\n        this.allComments = [];\r\n    }\r\n    async load() {\r\n        this.allInfo = await this.dataService.getUsers();\r\n        this.allComments = this.allInfo.comments;\r\n    }\r\n    ;\r\n    async ngOnInit() {\r\n        await this.load();\r\n    }\r\n    replyComment(obj) {\r\n        const date = new Date();\r\n        const comment = {\r\n            id: Date.now(),\r\n            content: obj.content,\r\n            creadetAt: `${date.getDay()}/${date.getMonth() + 1}/${date.getFullYear()}`,\r\n            score: 0,\r\n            user: {\r\n                image: this.allInfo.currentUser.image,\r\n                username: this.allInfo.currentUser.username,\r\n            }\r\n        };\r\n        for (let i = 0; i < this.allComments.length; i++) {\r\n            if (this.allComments[i].id === id && this.allComments[i].score >= 0) {\r\n                this.allComments[i].score++;\r\n            }\r\n            // this.allComments.push(obj.content);\r\n        }\r\n        //increment function\r\n        incrementScore(id, number);\r\n        {\r\n            for (let i = 0; i < this.allComments.length; i++) {\r\n                if (this.allComments[i].id === id && this.allComments[i].score >= 0) {\r\n                    this.allComments[i].score++;\r\n                }\r\n                if (this.allComments[i].replies) {\r\n                    for (let j = 0; j < this.allComments[i].replies.length; j++) {\r\n                        if (this.allComments[i].replies[j].id === id && this.allComments[i].replies[j].score >= 0) {\r\n                            this.allComments[i].replies[j].score++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        //decrement function\r\n        decrementScore(id, number);\r\n        {\r\n            for (let i = 0; i < this.allComments.length; i++) {\r\n                if (this.allComments[i].id === id && this.allComments[i].score > 0) {\r\n                    this.allComments[i].score--;\r\n                }\r\n                if (this.allComments[i].replies) {\r\n                    for (let j = 0; j < this.allComments[i].replies.length; j++) {\r\n                        if (this.allComments[i].replies[j].id === id && this.allComments[i].replies[j].score > 0) {\r\n                            this.allComments[i].replies[j].score--;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        deleteComment(id, number);\r\n        {\r\n            this.allComments = this.allComments.filter((comments) => {\r\n                if (comments.replies) {\r\n                    comments.replies = comments.replies.filter((replyComment) => {\r\n                        return replyComment.id !== id;\r\n                    });\r\n                }\r\n                return comments.id !== id;\r\n            });\r\n        }\r\n    }\r\n}\r\nAppComponent.ɵfac = function AppComponent_Factory(t) { return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.DataService)); };\r\nAppComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: AppComponent, selectors: [[\"app-root\"]], features: [i0.ɵɵProvidersFeature([DataService])], decls: 1, vars: 1, consts: [[\"id\", \"container\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"container\"], [3, \"commentInfo\", \"incrementValue\", \"decrementValue\", \"deleteValue\", \"replyText\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [3, \"commentInfo\", \"incrementValue\", \"decrementValue\", \"deleteValue\"]], template: function AppComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵtemplate(0, AppComponent_div_0_Template, 3, 2, \"div\", 0);\r\n    } if (rf & 2) {\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.allComments);\r\n    } }, directives: [i2.NgForOf, i3.OneCommentComponent, i2.NgIf], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcHAuY29tcG9uZW50LnNjc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}